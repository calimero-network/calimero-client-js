// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`Codegen > client.ts generation > should generate client.ts with correct structure 1`] = `
"/** @generated by @calimero/abi-codegen — DO NOT EDIT. */

// Re-export all types from types.ts
export * from "./types";

/**
 * Transport-agnostic caller interface
 */
export type Caller = <T>(method: string, params: unknown[]) => Promise<T>;

export class TestClient {
  constructor(private readonly call: Caller) {}

  /**
   * opt_u32
   */
  async opt_u32(value: number | null): Promise<number | null> {
    return this.call("opt_u32", [value]);
  }

  /**
   * list_u32
   */
  async list_u32(values: number[]): Promise<number[]> {
    return this.call("list_u32", [values]);
  }

  /**
   * map_u32
   */
  async map_u32(data: Record<string, number>): Promise<Record<string, number>> {
    return this.call("map_u32", [data]);
  }

  /**
   * make_person
   *
   * @throws {Error} May throw the following errors:
   * - INVALID_AGE: string
   * - NAME_TOO_LONG
   */
  async make_person(name: string, age: number, email: string | null): Promise<Person> {
    return this.call("make_person", [name, age, email]);
  }

  /**
   * profile_roundtrip
   */
  async profile_roundtrip(profile: Profile): Promise<Profile> {
    return this.call("profile_roundtrip", [profile]);
  }

  /**
   * act
   *
   * @throws {Error} May throw the following errors:
   * - ACTION_FAILED: ConformanceError
   */
  async act(action: Action): Promise<void> {
    return this.call("act", [action]);
  }

  /**
   * roundtrip_id
   */
  async roundtrip_id(id: UserId32): Promise<UserId32> {
    return this.call("roundtrip_id", [id]);
  }

  /**
   * roundtrip_hash
   */
  async roundtrip_hash(hash: Hash64): Promise<Hash64> {
    return this.call("roundtrip_hash", [hash]);
  }

  /**
   * may_fail
   *
   * @throws {Error} May throw the following errors:
   * - INTENTIONAL_FAILURE: string
   */
  async may_fail(should_fail: boolean): Promise<string> {
    return this.call("may_fail", [should_fail]);
  }

  /**
   * find_person
   *
   * @throws {Error} May throw the following errors:
   * - PERSON_NOT_FOUND: ConformanceError
   */
  async find_person(id: UserId32): Promise<Person | null> {
    return this.call("find_person", [id]);
  }

}"
`;

exports[`Codegen > types.ts generation > should generate types.ts with correct structure 1`] = `
"/** @generated by @calimero/abi-codegen — DO NOT EDIT. */

export interface AbiState {
  counter: number;
  last_updated: number;
  active: boolean;
}

export interface Person {
  id: UserId32;
  name: string;
  age: number;
  email: string | null;
  profile: Profile;
}

export interface Profile {
  bio: string | null;
  avatar_hash: Hash64;
  preferences: Record<string, string>;
}

export type Action =
  | { kind: "Create"; payload: Person }
  | { kind: "Update"; payload: { id: UserId32; changes: string } }
  | { kind: "Delete"; payload: UserId32 }

export type ConformanceError =
  | { kind: "NotFound"; payload: { resource: string; id: string } }
  | { kind: "InvalidInput"; payload: string }
  | { kind: "InternalError" }

/** Fixed-length bytes (size: 32). Represented as Uint8Array at runtime. */
export type UserId32 = Uint8Array;

/** Fixed-length bytes (size: 64). Represented as Uint8Array at runtime. */
export type Hash64 = Uint8Array;

export type make_personErrorCode = "INVALID_AGE" | "NAME_TOO_LONG";
export type make_personError = { code: make_personErrorCode } & (
  | { code: "INVALID_AGE"; payload: string }
  | { code: "NAME_TOO_LONG" }
);

export type actErrorCode = "ACTION_FAILED";
export type actError = { code: actErrorCode } & (
  | { code: "ACTION_FAILED"; payload: ConformanceError }
);

export type may_failErrorCode = "INTENTIONAL_FAILURE";
export type may_failError = { code: may_failErrorCode } & (
  | { code: "INTENTIONAL_FAILURE"; payload: string }
);

export type find_personErrorCode = "PERSON_NOT_FOUND";
export type find_personError = { code: find_personErrorCode } & (
  | { code: "PERSON_NOT_FOUND"; payload: ConformanceError }
);


export type NamedPayload = string;

export type DataPayload = Uint8Array;

export type PersonUpdatedPayload = { person: Person; timestamp: number };

export type ActionTakenPayload = { action: Action; actor: UserId32; success: boolean };

export type AbiEvent =
  | { name: "Ping" }
  | { name: "Named"; payload: string }
  | { name: "Data"; payload: Uint8Array }
  | { name: "PersonUpdated"; payload: { person: Person; timestamp: number } }
  | { name: "ActionTaken"; payload: { action: Action; actor: UserId32; success: boolean } }
;
"
`;
